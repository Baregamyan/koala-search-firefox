(()=>{"use strict";function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var t=function(){function t(e,i,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._resultsContainer=e,this._searchForm=i,this._resultClass=".".concat(n),this._results=this._resultsContainer.querySelectorAll(this._resultClass),this._linkListeners=[],this._documentListeners=[],this._onLinkBlur=this._blur.bind(this),this._onLinkFocus=this._focus.bind(this),this._onDocumentKeydown=this._keydown.bind(this),this._onDocumentKeyup=this._keyup.bind(this),this._indexActiveLink=0,this._isAnyLinkFocused=!1,this._isShiftPressed}var i,n;return i=t,(n=[{key:"_isSearchFormFocused",get:function(){return document.activeElement===this._searchForm}},{key:"_createListener",value:function(e,t){return{eventName:e,callback:t}}},{key:"_initLinks",value:function(){var e=this;this._links=Array.from(this._results).map((function(t){return e._setLink(t.querySelector("a"))})).filter((function(e,t,i){return i.indexOf(e)===t}))}},{key:"_fillListeners",value:function(){this._documentListeners.push(this._createListener("keydown",this._onDocumentKeydown)),this._documentListeners.push(this._createListener("keyup",this._onDocumentKeyup)),this._linkListeners.push(this._createListener("blur",this._onLinkBlur))}},{key:"_setListeners",value:function(e,t){t.forEach((function(t){var i=t.eventName,n=t.callback;e.addEventListener(i,n)}))}},{key:"_blur",value:function(){this._isAnyLinkFocused=!1,this._activeElement.classList.toggle("active",!1),this._activeElement=null}},{key:"_focus",value:function(e){e.focus(),e.scrollIntoView({block:"center"}),this._activeElement=e.parentElement.parentElement,this._activeElement.classList.toggle("active",!0)}},{key:"_setLink",value:function(e){return this._linkListeners.forEach((function(t){var i=t.eventName,n=t.callback;e.addEventListener(i,n),e.classList.toggle("link",!0)})),e}},{key:"_keydown",value:function(e){this._isSearchFormFocused||(38===e.keyCode&&(e.preventDefault(),this._up()),39===e.keyCode&&this._indexActiveLink===this._links.length-1&&e.preventDefault(),40===e.keyCode&&(e.preventDefault(),this._down()),9===e.keyCode&&(e.preventDefault(),this._isShiftPressed?this._up():this._down()),16===e.keyCode&&(this._isShiftPressed=!0))}},{key:"_keyup",value:function(e){16===e.keyCode&&(this._isShiftPressed=!1)}},{key:"init",value:function(){this._fillListeners(),console.log("listenners filled"),this._initLinks(),this._setListeners(document,this._documentListeners),this._focus(this._links[0])}},{key:"_up",value:function(){0!==this._indexActiveLink?this._indexActiveLink-=1:this._indexActiveLink=0,this._focus(this._links[this._indexActiveLink])}},{key:"_down",value:function(){this._indexActiveLink!==this._links.length-1?this._indexActiveLink+=1:this._indexActiveLink=this._links.length-1,this._focus(this._links[this._indexActiveLink])}}])&&e(i.prototype,n),t}();console.log("before find elements");var i=new t(document.querySelector("#search"),document.querySelector("#searchform").querySelector("input"),"g");console.log(i),console.log("beforeinit"),i.init()})();
//# sourceMappingURL=bundle.js.map